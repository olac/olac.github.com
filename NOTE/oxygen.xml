<?xml version="1.0"?>
<?xml-stylesheet href="../OLAC_doc.xsl" type="text/xsl"?>
<!DOCTYPE OLAC_doc SYSTEM "../OLAC_doc.dtd">
<OLAC_doc>
   <header>
      <status code="draft" type="implementation"/>
      <title>Using &lt;oXygen/&gt; XML Editor to Create or
         Validate an OLAC Static Repository</title>
      <baseName>oxygen</baseName>
      <issued>20090530</issued>
      <previousIssued/>
      <abstract>
         <p>Describes how to configure and use the
            &lt;oXygen/&gt; XML Editor as a tool for creating
            or validating a static repository that complies with the
               <cit>OLAC-Repositories</cit> standard.</p>
      </abstract>
      <editors>Gary Simons, SIL International
            (<url>mailto:gary_simons@sil.org</url>)</editors>
      <copyright>2009 Gary Simons (SIL International)</copyright>
      <changes> </changes>
   </header>
   <body>

      <section>
         <heading>Introduction</heading>
         <p>&lt;oXygen/&gt; XML Editor is a full-featured
            cross-platform XML editor (for Windows, Mac OS X, Linux
            and Eclipse) that provides the tools needed for XML authoring
            and application development <cit>oXygen</cit>. It is a
            mature product (in its Version 10.2 release at the time of
            writing) that is popular among academics due to its
            affordable academic license (priced at $48 at the time of
            writing) <cit>oXygen-Academic</cit>. The fully functional
            product may be downloaded and freely used for a 30-day
            evaluation period <cit>oXygen-Download</cit>.</p>
         <p>To install the program, simply download the &lt;oXygen/&gt; package for the
            appropriate platform from <cit>oXygen-Download</cit> and
            follow the instructions provided on that
            page. </p>
         <p>The XML Schema validator that is built into
            &lt;oXygen/&gt; XML Editor is Apache Xerces.
            For many years, &lt;oXygen/&gt; has not worked properly with
            OLAC repositories. This is because Xerces 
            incorrectly failed to validate  the XML schemas for Qualified Dublin
            Core on which the OLAC metadata standard is based (see
            Appendix A of <cit>DC-Notes</cit>). The problems have now
            been fixed so that the latest version of &lt;oXygen/&gt;
            is now able to handle an OLAC repository correctly without
            requiring special configuration to use a different schema
            validator.</p>
         <p>This document describes how &lt;oXygen/&gt; XML Editor can be used to
            create and validate a static repository of language
            resource descriptions that complies with the
               <cit>OLAC-Repositories</cit> standard. 
            Those who create a static
            repository by running a script over an existing data
            source do not need a tool like &lt;oXygen/&gt; for
            creating the repository, but they do need a tool for
            validating the output of their script; section 2 of this
            note describes
            how &lt;oXygen/&gt; can be used for this purpose.
            Section 3 goes on to describe how it can also be used to
            create and maintain a static repository as an original
            data source. </p>
      </section>
      <section>
         <heading>Validating a repository</heading>
         <p>After starting &lt;oXygen/&gt; XML Editor, use "File / Open" or "File / Open URL" to load the static
            repository that you wish to validate. For instance, a
            sample repository can be found at the following URL:</p>
         <blockquote>
            <p>
               <url>http://www.language-archives.org/OLAC/1.1/static-repository.xml</url>
            </p>
         </blockquote>
         <p>Click on the Validate Document button (the red check mark
            in the toolbar). Alternatively you may select "Document / Validate
            / Validate Document" from the menu bar or use the corresponding keyboard
            shortcut: Ctrl+Shift+V. The message in
            the status bar at the bottom of the window will say
            "Validation &#x2014; in progress". On completion it will report
            either "Document is valid" or "Validation failed"
            (followed by a count of errors).
         </p>
         <p>When errors are detected, they are indicated in a number
         of ways:</p>
         <ul>
            <li><p>An invalid tag or value is indicated in the
               document by a red
               underline. The underline will disappear as soon as the
               problem is fixed with the editor. Even if you are
               testing the validity of a repository that is being
               generated by a script, you may find this feature
               useful since you can edit the document to test the fix
               before making it in the script.</p></li>
            <li><p>The vertical scroll bar to the right of the editing
            page shows a red mark to indicate the location of each
            error in the document. Drag the scroll bar slider to line
            up with one of those marks in order to bring the
            corresponding error into view in the editing pane.</p></li>
            <li><p>Clicking within document content that has a red
            underline causes the associated error message to be 
            displayed at the bottom of the editing pane. If the
            message is truncated, double click on it to pop up a
            dialog box showing the full message.</p></li>
            <li><p>Document validation also opens a pane below the
               editing pane which shows a scrolling list of all error
               messages. Clicking on a message in that list scrolls
               the document to the location of the error and places
               the edit cursor at that point in the document. If the
               error message is truncated, hover the mouse pointer over
               the message to pop up a text box showing the full
               message.</p></li>
         </ul>
         <p>If you are unable to make sense of an error message, try
            the SaxonSA schema validator that is built into
            &lt;oXygen/&gt; XML Editor &#x2014; the message reported by it may
            help to shed more light on what the problem is. This validator is invoked by clicking the
            "SaxonSA" button in the toolbar. The errors as reported by
            SaxonSA show up in the scrolling list below the editing
            pane. Click on the tabs below the list, "Custom Validation
            - SaxonSA" versus "Errors", to toggle between the two sets of
            error messages.
         </p>
      </section>
      <section>
         <heading>Creating a repository</heading>
         <p>&lt;oXygen/&gt; XML Editor may also be used 
            to create a static repository in the first place, and then
            to maintain it as records need to be added or modified.
            The easiest way to create a new repository is to load the
            sample repository from the OLAC site and save it to your
            computer with a name that is appropriate for the
            repository you want to create. The sample repository is
            located at:
         </p>
         <blockquote>
            <p>
               <url>http://www.language-archives.org/OLAC/1.1/static-repository.xml</url>
            </p>
         </blockquote>
         <p>Open the renamed repository file with &lt;oXygen/&gt; XML
            Editor and use the editor to change the repository as needed. The
            primary advantage of starting with the existing sample is
            that all of the namespace declarations in the root element
            are known to be correct.
         </p>
         <p>The <tt>Identify</tt> section provides information about your
            repository. Some of the elements describe generic behavior
         that is true of all OLAC static repositories and do not need
         to be changed; others are specific to your repository and
         must be changed. The following are the elements that you will
         need to edit:</p>
         <dl>
            <dt>oai:repositoryName</dt>
            <dd><p>Enter the name of your repository as you want it to
            appear in the Participating Archives list
               <cit>OLAC-Archives</cit>.</p></dd>
            <dt>oai:baseURL</dt>
            <dd><p>Enter the URL that this static repository will have
               when it is posted on the web.</p></dd>
            <dt>oai:adminEmail</dt>
            <dd><p>Enter your email address. This is the contact
               address used by others in the OLAC community who encounter problems when
               trying to harvest your repository.</p></dd>
            <dt>oai:earliestDatestamp</dt>
            <dd><p>Enter a date that is equal to (or is prior to) the date
               of the earliest <tt>&lt;oai:datestamp&gt;</tt> of all
               the records listed in the <tt>ListRecords</tt> section
               of the repository. (Some harvesters use this value
               with incremental harvesting as the date before which
               there are guaranteed to be no records.)
            </p></dd>
            <dt>repositoryIdentifier</dt>
            <dd>
               <p>Enter an identifier that will uniquely identify this
                  repository among all the participating archives. 
                  It must be based on a
                  registered domain name, typically of the sponsoring
                  institution. Click "Machine readable list of
                  registered archives" on <cit>OLAC-Archives</cit> to
                  see a list of identifiers for current participants.
                  A single institution may use subdomain
                  names to distinguish multiple metadata repositories.
                  A host institution may also use
                  subdomain names to create identifiers for personal
                  repositories.</p></dd>
            <dt>sampleIdentifier</dt>
            <dd><p>Enter the <tt>&lt;oai:identifier&gt;</tt> of one of
               the records listed below in the <tt>ListRecords</tt> section.
               It must be identifier of an existing item, and not a
               hypothetical one. </p></dd>
            <dt>olac-archive</dt>
            <dd><p>Every attribute and subelement of the
               <tt>&lt;olac-archive&gt;</tt>
               element must be updated. See section 3 of
               <cit>OLAC-Repositories</cit> for the definition of all
               the attributes and elements. In addition to simply
               updating the contents that you see in the sample
               repository, be aware of the following special cases:</p>
               <ul>
                  <li><p>The <tt>&lt;participant&gt;</tt> element is
                     repeatable. Edit the instance that is already
                     there to give your name and role and email
                     address; the address must match what you entered above for 
                     <tt>&lt;oai:adminEmail&gt;</tt>. You may now add
                     entries for any other persons who have key roles
                     in the archive. In addition to providing contact 
                     information for the OLAC community, doing so also
                     creates a subscription to the automatically generated
                     report on repository usage statistics and metadata quality metrics 
                     that is emailed quarterly.  Do the following to add 
                     a participant: place the cursor after
                     <tt>&lt;/participant&gt;</tt>, press Enter to open a new
                     line, type "&lt;" to open a new tag, select
                     <tt>participant</tt> in the context menu
                     that pops up (either by double-clicking or
                     pressing Enter), and fill in the attribute values.</p></li>
                  <li><p>Three of the
                     elements are optional: <tt>&lt;archiveURL&gt;</tt>, 
                     <tt>&lt;institutionURL&gt;</tt>, and
                     <tt>&lt;location&gt;</tt>. If one of these elements is
                     not relevant for your repository, delete the whole
                     element. </p></li>
                  <li><p>Another element is optional but not present in
                     the sample repository, namely,
                     <tt>&lt;archivalSubmissionPolicy&gt;</tt>. If that is
                     relevant for your repository, add it to the end of the
                     description as follows: place the cursor after
                     <tt>&lt;/access&gt;</tt>, press Enter to open a new
                     line, type "&lt;" to open a new tag, select
                     <tt>archivalSubmissionPolicy</tt> in the context menu
                     that pops up, and fill in the appropriate policy
                     description. </p></li>
               </ul>
               </dd>
         </dl>
         <p>Make no changes to the <tt>ListMetadataFormats</tt>
         section.</p>
         <p>The <tt>&lt;ListRecords metadataPrefix="olac"&gt;</tt> section is where all of the
            OLAC metadata records are entered.  The sample repository
            contains two records.   You can start by deleting
            one of those records; then edit the remaining record to be
            the first record in your repository.</p>
         <p>The <tt>&lt;oai:header&gt;</tt> part of the record has the
            following two
            obligatory elements:</p>
         <dl>
            <dt>oai:identifier</dt>
            <dd><p>Enter here the unique OAI identifier for the item. The
               identifier is constructed from three parts separated by colon: the
               literal string "oai", the <tt>repositoryIdentifier</tt>
               as entered above, and a string that identifies the
               item uniquely within the set of archive holdings. This
               latter part of the identifier, following the second
               colon, is the only part that will vary from record to
               record. It is under your discretion to assign this
               local identifier in whatever way you want.  If the
               items in your collection already have some kind of unique identifier,
               you may use that. Otherwise, you may do something like
               assign a serial number sequentially. The
               identifier for a record becomes set the first time it
               is harvested. After that it should not be
               changed since it is by matching identifiers that the
               harvester knows which stored metadata record to update 
               when a repository is reharvested. </p></dd>
            <dt>oai:datestamp</dt>
            <dd><p>Enter here the latest revision date for this
               metadata record.  The datestamp does not describe a
               date related to the resource itself (for this, use the date
               elements within the metadata part of the record).
               Rather, it refers only to the expression of the metadata
            in this record. Whenever the record is updated, the
            datestamp must be updated. Otherwise, incremental
            harvesting will not know that the record has changed and
            so will fail to reharvest it.</p></dd>
         </dl>
         <p>The <tt>&lt;oai:metadata&gt;</tt> part of the record is
            where the OLAC metadata record goes. Inside the
            <tt>&lt;olac:olac&gt;</tt> container, all of the metadata
            elements are optional and repeatable and may occur in any
            order. When you want to add a new metadata element, click
            at the end of the element you want to place it after. Then
            press Enter to open up a new line, type "&lt;" to open a
            new tag, scroll through the pop-up list of available
            metadata elements, and press Enter to select the element you want.
            Also, you may start typing the tag name to narrow the
            selection list. As you are creating a metadata
            description, consult the OLAC Metadata Usage Guidelines 
            <cit>OLAC-Usage</cit> for definitions of the available
            elements and examples of their use.
         </p>
         <p>After you have created your first metadata record, use 
            the Free-standing Metadata Service <cit>OLAC-Free</cit> to
            obtain an analysis of the completeness and quality of the
            metadata record. This is done as follows:</p>
         <ol>
            <li><p>In &lt;oXygen/&gt; XML Editor, click at the
               beginning of the
               <tt>&lt;olac:olac&gt;</tt> tag and drag all the way to
               the end of the corresponding end tag in order to select
               the entire OLAC metadata record.</p></li>
            <li><p>Press Ctrl+C (or select "Edit / Copy" from the menu
            bar) to copy the record.</p></li>
            <li><p>Open the Free-standing Metadata Service by clicking
            on this link: <cit>OLAC-Free</cit>.</p></li>
            <li><p>Click on the "Clear the text area" button located below the
            submission form.</p></li>
            <li><p>Click inside the text box, then press Ctrl+V (or
               select "Edit / Paste" from the menu
               bar) to paste the record into the submission form.</p></li>
            <li><p>Click on the "Analyze" button located below the submission
               form. If the result shows validation errors, then click
            the browser's Back button to return to the submission
            form. Edit the contents to correct the errors and click
            "Analyze" again.</p></li>
            <li><p>Scroll to the end of the resulting page
               to see the <i>Metadata quality analysis</i>
               section. It suggests things that can be added to the
               record in order to better follow OLAC's best practice
               recommendations for language resource description 
               <cit>OLAC-BPR</cit> and thereby
               increase your repository's score with respect to the
               OLAC metadata metrics <cit>OLAC-Metrics</cit>. </p></li>
            
         </ol>
         <p>Once you have completed filling in the first record, you
            may find it helpful to turn it into a template for the
            remaining records. Make a copy of the complete
            <tt>&lt;oai:record&gt;</tt> and remove
            contents that are specific to first record, but leaving
            everything (both tags and contents) that you think are
            likely to be re-used in the other records.  Then, every
            time you want to add a new record, start by pasting in a
            copy of this template record.
            </p>
         
      </section>
      <section>
         <heading>Registering a repository</heading>
         <p>When your static repository is complete and is valid
            according to the schema
            validator in &lt;oXygen/&gt; XML Editor, you are ready to
            register with OLAC. The steps are as follows:</p>
         <ol>
            <li><p>Post your repository on your institution's public
               web site. If you do not have access to a public web
               site, contact the OLAC administrators; it is possible
               for a static repository to be hosted on the OLAC site.</p></li>
            <li>
               <p>Go to the OLAC
                  Archive Registration page <cit>OLAC-Register</cit>
                  and paste the URL for
                  your repository file into the text
                  box and click the "Validate" button.  This performs
                  the same schema validation that you have been
                  performing in &lt;oXygen/&gt;. In addition it tests
                  for other conditions described in
                  <cit>OLAC-Repositories</cit> that go beyond schema
                  validation. If the final line says "FAILURE,"
                  you still have work to do. Make note of all the
                  individual tests that failed and fix the offending
                  content in the repository; then repeat the
                  validation process. If the XML Schema
                  Validation is failing, click on the "error logs" link to see
                  the list of errors generated by the validator. The
                  two validators report the errors differently, so
                  look at both logs to get a fuller idea of what is
                  wrong.</p></li>
            <li><p>If the
               final line of the validation report says "SUCCESS," then 
               you will be presented with a button that allows you to
               submit a registration request. After clicking the button, you should get an
               email confirmation of the submission.  You will receive
               further notification after the repository has been
               reviewed against the criteria listed in section 6 of
               <cit>OLAC-Repositories</cit> and accepted for harvesting.</p></li>
         </ol>
      </section>
      
      
      
   </body>
   <references>
      <ref abbrev="DC-Notes">Notes on the W3C XML Schemas for
         Qualified Dublin Core.<br/>
            &lt;<url>http://dublincore.org/schemas/xmls/qdc/2003/04/02/notes/</url>&gt;</ref>

      <ref abbrev="OLAC-Archives">OLAC Participating Archives.<br/>
         &lt;<url>http://www.language-archives.org/archives.php</url>&gt;
      </ref>
      <ref abbrev="OLAC-BPR">Best Practice Recommendations for Language Resource Description.<br/>
         &lt;<url>http://www.language-archives.org/REC/bpr.html</url>&gt;</ref>
      <ref abbrev="OLAC-Free">Free-standing OLAC Metadata.<br/>
         &lt;<url>http://www.language-archives.org/tools/metadata/freestanding.html</url>&gt;</ref>
      <ref abbrev="OLAC-Metrics">OLAC Metadata Metrics.<br/>
         &lt;<url>http://www.language-archives.org/NOTE/metrics.html</url>&gt;</ref>
      <ref abbrev="OLAC-Register">OLAC Archive Registration.<br/>
         &lt;<url>http://www.language-archives.org/register/register.php4</url>&gt;</ref>
      <ref abbrev="OLAC-Repositories">OLAC Repositories.<br/>
            &lt;<url>http://www.language-archives.org/OLAC/repositories.html</url>&gt;</ref>
      <ref abbrev="OLAC-Usage">OLAC Metadata Usage Guidelines.<br/>
         &lt;<url>http://www.language-archives.org/NOTE/usage.html</url>&gt;</ref>
      
      <ref abbrev="oXygen">&lt;oXygen/&gt; XML Editor and XSLT
         Debugger.<br/>
         &lt;<url>http://www.oxygenxml.com/</url>&gt;</ref>
      <ref abbrev="oXygen-Academic">&lt;oXygen/&gt; XML
         Editor: Buy Academic/Home Edition Licenses.<br/>
            &lt;<url>http://www.oxygenxml.com/buy_new_licenses_academic.html</url>&gt;</ref>
      <ref abbrev="oXygen-Download">Download &lt;oXygen/&gt;
         XML Editor for Windows, Mac OS X, Linux and Eclipse.<br/>
            &lt;<url>http://www.oxygenxml.com/download.html</url>&gt;</ref>

   </references>

</OLAC_doc>
